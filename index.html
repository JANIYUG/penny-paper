<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Expense Tracker - Dark</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- AUTH CONTAINER -->
<div id="authContainer" class="auth-container" style="display:none;">
  <div class="login-container">
    <div class="login-card">
      <div class="login-header">
        <h1>Penny & Paper</h1>
      </div>

      <div class="auth-form" id="loginForm">
        <h2>Welcome Back</h2>
        <form id="loginFormEl">
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input type="email" id="loginEmail" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <div class="password-input-wrapper">
              <input type="password" id="loginPassword" placeholder="Enter your password" required>
              <button type="button" class="toggle-password" data-target="loginPassword">
                <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>
          <button type="submit" class="btn-auth">Login</button>
        </form>
        <p class="auth-toggle">
          Don't have an account? <a href="#" id="linkShowSignup">Sign Up</a>
        </p>
      </div>

      <div class="auth-form" id="signupForm" style="display: none;">
        <h2>Create Account</h2>
        <form id="signupFormEl">
          <div class="form-group">
            <label for="signupName">Full Name</label>
            <input type="text" id="signupName" placeholder="Enter your name" required>
          </div>
          <div class="form-group">
            <label for="signupEmail">Email</label>
            <input type="email" id="signupEmail" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label for="signupPassword">Password</label>
            <div class="password-input-wrapper">
              <input type="password" id="signupPassword" placeholder="Create a password" required minlength="6">
              <button type="button" class="toggle-password" data-target="signupPassword">
                <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="signupConfirmPassword">Confirm Password</label>
            <div class="password-input-wrapper">
              <input type="password" id="signupConfirmPassword" placeholder="Confirm your password" required minlength="6">
              <button type="button" class="toggle-password" data-target="signupConfirmPassword">
                <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>
          <button type="submit" class="btn-auth">Sign Up</button>
        </form>
        <p class="auth-toggle">
          Already have an account? <a href="#" id="linkShowLogin">Login</a>
        </p>
      </div>
    </div>
  </div>
</div>

<div class="app" id="appRoot" style="display:none;">
  <!-- Top Nav -->
  <header class="top-nav">
    <label for="sidebar-toggle" class="hamburger">&#9776;</label>
    <h1>PENNY & PAPER</h1>
    <div class="top-actions">
      <button class="top-settings-btn" onclick="openSettingsModal()"> Settings</button>
      <button class="top-logout-btn" onclick="handleLogout()">Logout</button>
    </div>
  </header>

  <!-- Sidebar -->
  <input type="checkbox" id="sidebar-toggle" class="sidebar-toggle-checkbox">
  <label for="sidebar-toggle" class="sidebar-overlay"></label>
  <aside class="sidebar">
    <div class="sidebar-profile" onclick="openProfileModal()">
      <div class="profile-avatar"></div>
      <div>
        <h3 class="profile-name" id="sidebarName">Guest</h3>
        <small class="profile-age" id="sidebarAge">Age: --</small>
      </div>
    </div>
    <nav>
      <a onclick="scrollToSection('home')" class="active" id="nav-home">Dashboard</a>
      <a onclick="scrollToSection('add-expense')" id="nav-add">Add Expense</a>
      <a onclick="scrollToSection('reports')" id="nav-reports">Reports</a>
      <a onclick="scrollToSection('notes')" id="nav-notes">Notes</a>
    </nav>
  </aside>

  <!-- Main Slider -->
  <div class="main-slider-container">
    <main class="main-slider" id="mainSlider">
      
      <!-- SECTION 1: DASHBOARD -->
      <section id="home" class="page-section">
        <div class="dashboard">
          <!-- Donut Cards -->
          <div class="donut-cards-grid">
            <div class="card donut-card" id="card-daily">
              <div>
                <h4>Today</h4>
                <h2>0</h2>
                <small>Limit 500</small>
              </div>
              <div class="ring-container">
                <div class="ring-fraction">0/500</div>
                <div class="ring" style="--percent:0%">
                  <span class="ring-percent">0%</span>
                </div>
              </div>
            </div>
            <div class="card donut-card" id="card-weekly">
              <div>
                <h4>Weekly</h4>
                <h2>0</h2>
                <small>Limit 3k</small>
              </div>
              <div class="ring-container">
                <div class="ring-fraction">0/3k</div>
                <div class="ring" style="--percent:0%">
                  <span class="ring-percent">0%</span>
                </div>
              </div>
            </div>
            <div class="card donut-card" id="card-monthly">
              <div>
                <h4>Monthly</h4>
                <h2>0</h2>
                <small>Limit 20k</small>
              </div>
              <div class="ring-container">
                <div class="ring-fraction">0/20k</div>
                <div class="ring" style="--percent:0%">
                  <span class="ring-percent">0%</span>
                </div>
              </div>
            </div>
            <div class="card donut-card" id="card-yearly">
              <div>
                <h4>Yearly</h4>
                <h2>0</h2>
                <small>Limit 1.5L</small>
              </div>
              <div class="ring-container">
                <div class="ring-fraction">0/1.5L</div>
                <div class="ring" style="--percent:0%">
                  <span class="ring-percent">0%</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Other Cards -->
          <div class="other-cards-section">
            <div class="card">
              <h4>Top Category</h4>
              <h2 id="topCatName">-</h2>
              <p id="topCatAmount">0</p>
            </div>
            <div class="card">
              <h4>Transactions</h4>
              <h2 id="transCount">0</h2>
              <p id="transDiff">+0 vs last month</p>
            </div>
            <div class="card">
              <h4>Savings</h4>
              <h2 id="savingsAmount">0</h2>
              <p id="savingsTarget">Target: 10,000</p>
            </div>
            <div class="card">
              <h4>Recent</h4>
              <ul class="list" id="recentList" style="list-style:none; display:grid; gap:8px;">
                <li>No transactions</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION 2: ADD EXPENSE -->
      <section id="add-expense" class="page-section">
        <div class="add-expense-container">
          <div class="form-card">
            <h2>Add New Expense</h2>
            <form id="expenseForm">
              <div class="form-group">
                <label>Amount (₹)</label>
                <input type="number" id="amount" required min="0" step="0.01">
              </div>
              <div class="form-group">
                <label>Category</label>
                <select id="category" required>
                  <option value="Food">Food</option>
                  <option value="Travel">Travel</option>
                  <option value="Shopping">Shopping</option>
                  <option value="Entertainment">Entertainment</option>
                  <option value="Bills">Bills</option>
                  <option value="Health">Health</option>
                  <option value="Education">Education</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div class="form-group">
                <label>Payment Method</label>
                <select id="paymentMethod">
                  <option value="Cash">Cash</option>
                  <option value="Card">Card</option>
                  <option value="UPI">UPI</option>
                  <option value="Bank Transfer">Bank Transfer</option>
                </select>
              </div>
              <div class="form-group">
                <label>Description</label>
                <input type="text" id="description" required>
              </div>
              <div class="form-group">
                <label>Date</label>
                <input type="date" id="date" required>
              </div>
              <div class="form-group">
                <button type="submit" class="btn-submit">Add Expense</button>
              </div>
            </form>
          </div>
          
          <div class="recent-entries card">
            <h3>Recent Entries</h3>
            <div id="entriesList" style="display:grid; gap:10px; margin-top:10px;">
              <!-- Entries -->
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION 3: REPORTS -->
      <section id="reports" class="page-section">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; max-width:1200px; margin-left:auto; margin-right:auto;">
           <h2>Reports</h2>
           <div>
             <button onclick="scrollReports('left')" class="btn-reset" style="padding:4px 12px; font-size:18px;">&lsaquo;</button>
             <button onclick="scrollReports('right')" class="btn-reset" style="padding:4px 12px; font-size:18px;">&rsaquo;</button>
           </div>
        </div>
        <div class="report-grid" id="reportGrid">
          <div class="grid-column">
            <div class="report-card">
              <h3>Total Expenses</h3>
              <h2 id="repTotal">0</h2>
            </div>
            <div class="report-card">
              <h3>Budget Status</h3>
              <div id="repBudgetStatus">
                <p>Monthly: <span id="repMonthStatus">0%</span></p>
                <div class="progress-bar" style="height:6px; background:#333; border-radius:3px; margin-top:4px;">
                  <div id="repMonthBar" style="height:100%; width:0%; background:var(--text); border-radius:3px;"></div>
                </div>
              </div>
            </div>
            <div class="report-card">
              <h3>Category Breakdown</h3>
              <canvas id="categoryChart"></canvas>
            </div>
          </div>
          <div class="grid-column">
            <div class="report-card">
              <h3>Daily Trend</h3>
              <canvas id="trendChart"></canvas>
            </div>
            <div class="report-card">
              <h3>Analysis</h3>
              <div style="display:grid; gap:10px;">
                <div>
                  <small style="color:var(--muted)">Avg Daily Spend</small>
                  <h4 id="repAvgDaily">0</h4>
                </div>
                <div>
                  <small style="color:var(--muted)">Highest Spending Day</small>
                  <h4 id="repHighestDay">-</h4>
                </div>
              </div>
            </div>
          </div>
          <div class="grid-column">
            <div class="report-card">
              <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>Recent Transactions</h3>
                <button class="btn-submit" onclick="openHistoryModal()" style="padding:4px 8px; font-size:12px;">See All</button>
              </div>
              <div id="historySummaryList" style="margin-top:10px; display:grid; gap:8px;">
                 <!-- Top 5 items here -->
              </div>
            </div>
            <div class="report-card">
              <h3>Top Expenses</h3>
              <div id="repTopList"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION 4: NOTES -->
      <section id="notes" class="page-section">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; max-width:1200px; margin-left:auto; margin-right:auto;">
          <h2>My Notes</h2>
          <button class="btn-submit" onclick="createNewNote()">+ New Note</button>
        </div>
        <div class="notes-grid" id="notesGrid" style="max-width:1200px; margin:0 auto;">
          <!-- Notes -->
        </div>
      </section>

    </main>
  </div>
</div>

<!-- SETTINGS MODAL -->
<div id="settingsModal" class="settings-modal">
  <div class="settings-modal-content">
    <div class="settings-header">
      <h2>Settings</h2>
      <span class="close" onclick="closeSettingsModal()">&times;</span>
    </div>
    <div class="settings-body">
      <div class="settings-section">
        <h3>Limits & Targets</h3>
        <div class="settings-group">
          <label>Daily Limit (₹)</label>
          <input type="number" id="setDaily">
          <label>Weekly Limit (₹)</label>
          <input type="number" id="setWeekly">
          <label>Monthly Limit (₹)</label>
          <input type="number" id="setMonthly">
          <label>Yearly Limit (₹)</label>
          <input type="number" id="setYearly">
          <label>Savings Target (₹)</label>
          <input type="number" id="setSavings">
        </div>
      </div>
      <div class="settings-footer">
        <button class="save-settings-btn" onclick="saveSettings()">Save All Settings</button>
        <button class="reset-data-btn" onclick="resetData()">Reset All Data</button>
        <button class="cancel-settings-btn" onclick="closeSettingsModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- NOTE MODAL -->
<div id="noteModal" class="note-modal">
  <div class="note-modal-content">
    <div class="settings-header">
      <h2>Edit Note</h2>
      <span class="close" onclick="closeNoteModal()">&times;</span>
    </div>
    <div class="settings-group">
      <input type="text" id="noteTitle" placeholder="Title" style="font-weight:bold; font-size:18px;">
      <textarea id="noteBody" rows="10" placeholder="Write something..."></textarea>
      <div style="display:flex; flex-direction:column; gap:10px; margin-top:10px;">
        <label style="font-weight:bold; color:var(--muted);">Reminder Details:</label>
        <div style="display:flex; gap:10px;">
          <div style="flex:1">
            <label>Date</label>
            <input type="date" id="noteDate">
          </div>
          <div style="flex:1">
            <label>Time</label>
            <input type="time" id="noteTime">
          </div>
        </div>
        <div>
          <label>Amount (Optional)</label>
          <input type="number" id="noteAmount" placeholder="₹0.00">
        </div>
      </div>
    </div>
    <div class="settings-footer">
      <button class="save-settings-btn" onclick="saveNote()">Save Note</button>
      <button class="reset-data-btn" onclick="deleteNote()" style="border-color:var(--danger); color:var(--danger);">Delete</button>
    </div>
  </div>
</div>

<!-- PROFILE MODAL -->
<div id="profileModal" class="settings-modal">
  <div class="settings-modal-content">
    <div class="settings-header">
      <h2>My Profile</h2>
      <span class="close" onclick="closeProfileModal()">&times;</span>
    </div>
    <div class="settings-body">
      <div class="settings-group">
        <label>Name</label>
        <input type="text" id="profName">
        <label>Age</label>
        <input type="number" id="profAge">
      </div>
    </div>
    <div class="settings-footer">
      <button class="save-settings-btn" onclick="saveProfile()">Save Profile</button>
      <button class="cancel-settings-btn" onclick="closeProfileModal()">Cancel</button>
    </div>
  </div>
</div>

<!-- HISTORY MODAL -->
<div id="historyModal" class="settings-modal">
  <div class="settings-modal-content" style="max-width:800px; width:95%;">
    <div class="settings-header">
      <h2>All Transactions</h2>
      <span class="close" onclick="closeHistoryModal()">&times;</span>
    </div>
    <div class="settings-body" style="max-height:70vh; overflow-y:auto;">
      <div style="overflow-x:auto;">
        <table style="width:100%; border-collapse:collapse; font-size:14px;">
          <thead>
            <tr style="border-bottom:1px solid var(--border); text-align:left;">
              <th style="padding:8px; color:var(--muted);">Date</th>
              <th style="padding:8px; color:var(--muted);">Category</th>
              <th style="padding:8px; color:var(--muted);">Description</th>
              <th style="padding:8px; color:var(--muted);">Method</th>
              <th style="padding:8px; text-align:right; color:var(--muted);">Amount</th>
            </tr>
          </thead>
          <tbody id="fullHistoryTableBody">
            <!-- Rows -->
          </tbody>
        </table>
      </div>
    </div>
    <div class="settings-footer">
      <button class="cancel-settings-btn" onclick="closeHistoryModal()">Close</button>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
